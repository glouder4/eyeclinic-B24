this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,t){"use strict";class i{saveVisit(e){return t.ajax.runAction("sign.api.tour.saveVisit",{data:{tourId:e}}).then((({data:e})=>e))}getLastVisitDate(e){return t.ajax.runAction("sign.api.tour.getLastVisitDate",{data:{tourId:e}}).then((({data:e})=>{if(!t.Type.isNil(e==null?void 0:e.lastVisitDate)){e.lastVisitDate=new Date(e.lastVisitDate)}return e}))}isAllToursDisabled(){return t.ajax.runAction("sign.api.tour.isAllToursDisabled",{}).then((({data:e})=>e))}}var a=babelHelpers.classPrivateFieldLooseKey("isAllTourDisabled");var r=babelHelpers.classPrivateFieldLooseKey("isIdAutoGenerated");var l=babelHelpers.classPrivateFieldLooseKey("autogeneratedIdPrefix");var o=babelHelpers.classPrivateFieldLooseKey("backend");class d extends s.Guide{constructor(e){super(e);Object.defineProperty(this,r,{writable:true,value:void 0});Object.defineProperty(this,l,{writable:true,value:"sign-tour-guide-"});Object.defineProperty(this,o,{writable:true,value:new i});if(t.Type.isStringFilled(e.id)){this.setId(e.id);babelHelpers.classPrivateFieldLooseBase(this,r)[r]=false}else{this.setId(babelHelpers.classPrivateFieldLooseBase(this,l)[l]+t.Text.getRandom(14));babelHelpers.classPrivateFieldLooseBase(this,r)[r]=true}if(t.Type.isUndefined(babelHelpers.classPrivateFieldLooseBase(d,a)[a])){babelHelpers.classPrivateFieldLooseBase(d,a)[a]=babelHelpers.classPrivateFieldLooseBase(this,o)[o].isAllToursDisabled()}}save(){babelHelpers.classPrivateFieldLooseBase(this,o)[o].saveVisit(this.getId())}start(){babelHelpers.classPrivateFieldLooseBase(d,a)[a].then((e=>{if(!e){super.start()}}))}startOnce(){if(babelHelpers.classPrivateFieldLooseBase(this,r)[r]){throw new Error("Cant start guide once if id autogenerated. Set id in constructor")}if(!this.getAutoSave()){throw new Error("Cant start guide once if guide is not auto saved")}return Promise.all([babelHelpers.classPrivateFieldLooseBase(this,o)[o].getLastVisitDate(this.getId()),babelHelpers.classPrivateFieldLooseBase(d,a)[a]]).then((([{lastVisitDate:e},s])=>{if(!s&&t.Type.isNull(e)){this.start()}}))}}Object.defineProperty(d,a,{writable:true,value:void 0});e.Guide=d})(this.BX.Sign.Tour=this.BX.Sign.Tour||{},BX.UI.Tour,BX);
//# sourceMappingURL=tour.bundle.map.js